{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8bc22e344de1048ea55a","webpack:///external \"rxjs\"","webpack:///./src/Store/Store.js","webpack:///./src/Store/StoreEngine.js","webpack:///./src/Store/StoreEngineReducer.js","webpack:///./src/Store/index.js","webpack:///./src/constants.js","webpack:///./src/util.js","webpack:///./src/index.js","webpack:///./src/bottle.js","webpack:///external \"bottlejs\""],"names":["bottle","p","constructor","props","initializer","lGet","state","status","subscribe","initialize","resolve","error","reject","BASE_STATE_STATUS_INITIALIZED","mutators","actions","combineLatest","map","Object","subscribeToActions","params","mutator","message","type","delta","cloneDeep","prevState","defaultActionReducer","localEngines","first","engine","defaultStateReducer","console","engineStreams","engines","e","self","states","Promise","_","store","storeEngine","storeReducer","Symbol","out","result","err","change","Bottle","constants","util","container","Store","StoreEngine","StoreEngineReducer","update","mergeIntoState"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"freactal3\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"freactal3\"] = factory();\n\telse\n\t\troot[\"freactal3\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8bc22e344de1048ea55a","module.exports = require(\"rxjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs\"\n// module id = 0\n// module chunks = 0","import { combineLatest, BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport lGet from 'lodash.get';\nimport lClone from 'lodash.clonedeep';\n\nexport default (bottle) => {\n  bottle.factory(\n    'Store',\n    ({\n      BASE_STATE_UNINITIALIZED_VALUE,\n      BASE_STATE_STATUS_UNINITIALIZED,\n      BASE_STATE_STATUS_INITIALIZING,\n      BASE_STATE_STATUS_INITIALIZATION_ERROR,\n      BASE_STATE_STATUS_INITIALIZED,\n      p,\n    }) => {\n      class Store {\n        constructor(props = null) {\n          let state = BASE_STATE_UNINITIALIZED_VALUE;\n          let initializer = null;\n          if (props) {\n            if (typeof props === 'function') {\n              initializer = props;\n            } else if (typeof props === 'object') {\n              if ('state' in props || 'initializer' in props) {\n                initializer = lGet(props, 'initializer');\n                state = lGet(props, 'state', BASE_STATE_UNINITIALIZED_VALUE);\n              } else {\n                state = props;\n              }\n            } else {\n              state = props;\n            }\n          }\n\n          this._stateStream = new BehaviorSubject();\n          this._stateStream.subscribe((next) => {\n            this._state = next;\n          });\n\n          this._statusStream = new BehaviorSubject();\n          this._statusStream.subscribe((next) => {\n            this._status = next;\n          });\n\n          this._stream = combineLatest(this._stateStream, this._statusStream)\n          // eslint-disable-next-line no-shadow\n            .pipe(map(([state, status]) => ({\n              state,\n              status,\n            })));\n\n          this._statusStream.next(BASE_STATE_STATUS_UNINITIALIZED);\n          this.state = lClone(state);\n\n          if (initializer) {\n            if (typeof initializer !== 'function') {\n              throw new Error('bad initializer', initializer);\n            }\n            this._initializer = initializer;\n          }\n        }\n\n        get state() {\n          return this._state;\n        }\n\n        set state(value) {\n          this._stateStream.next(value);\n        }\n\n        get status() {\n          return this._status;\n        }\n\n        subscribe(...args) {\n          this._stream.subscribe(...args);\n        }\n\n        initialize() {\n          if (!this._initPromise) {\n            this._initPromise = new Promise(async (resolve, reject) => {\n              if (!this._initializer) {\n                if (this.state !== BASE_STATE_STATUS_INITIALIZED) {\n                  this._statusStream.next(BASE_STATE_STATUS_INITIALIZED);\n                }\n                resolve();\n                return;\n              } else if (this.state === BASE_STATE_STATUS_INITIALIZED) {\n                resolve();\n                return;\n              }\n              this._statusStream.next(BASE_STATE_STATUS_INITIALIZING);\n              const [state, error] = await p(this._initializer, this);\n              if (error) {\n                this.initializionError = error;\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZATION_ERROR);\n                reject(error);\n              } else {\n                this.state = state;\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZED);\n                resolve();\n              }\n            });\n          }\n          return this._initPromise;\n        }\n      }\n\n      return Store;\n    },\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/Store.js","import { combineLatest, Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport lGet from 'lodash.get';\nimport cloneDeep from 'lodash.clonedeep';\n\nexport default (bottle) => {\n  bottle.factory(\n    'StoreEngine',\n    ({\n      Store, ACTION_START, ACTION_ERROR, ACTION_COMPLETE, p, BASE_STATE_STATUS_INITIALIZED,\n    }) => {\n      class StoreEngine extends Store {\n        constructor(props, actions) {\n          const mutators = actions || lGet(props, 'actions', lGet(props, 'effects', {}));\n          delete props.actions;\n\n          super(props);\n\n          this.mutators = mutators;\n\n          this._actionsStream = new Subject();\n\n          this._actionStream = combineLatest(this._stream, this._actionsStream)\n            .pipe(map(([store, action]) => ({\n              ...store,\n              ...action,\n            })));\n        }\n\n        set mutators(mutators) {\n          this._mutators = mutators;\n          this.actions = {};\n          Object.keys(this.mutators).forEach((name) => {\n            this.actions[name] = (...params) => this.perform({ name, params });\n          });\n        }\n\n        get mutators() {\n          return this._mutators;\n        }\n\n        get effects() {\n          return this.actions;\n        }\n\n        subscribeToActions(...args) {\n          return this._actionStream.subscribe(...args);\n        }\n\n        async perform({\n          name, mutator, actions, params = [],\n        }) {\n          if (this.status !== BASE_STATE_STATUS_INITIALIZED) await this.initialize();\n          if (!mutator) mutator = this.mutators[name];\n          if (!actions) actions = this.actions;\n\n          if (!mutator) {\n            return this._actionsStream.next({\n              type: ACTION_ERROR,\n              name,\n              error: { message: 'cannot find action' },\n            });\n          }\n\n          this._actionsStream.next({\n            name,\n            params,\n            type: ACTION_START,\n          });\n\n          const [delta, error] = await p(mutator, actions, ...params);\n\n          if (error) {\n            this._actionsStream.next({\n              name,\n              params,\n              type: ACTION_ERROR,\n              error,\n            });\n          } else {\n            const prevState = cloneDeep(this.state);\n            if (delta && (typeof delta === 'function')) {\n              this.state = delta(this.state);\n            }\n            this._actionsStream.next({\n              type: ACTION_COMPLETE,\n              name,\n              params,\n              state: this.state,\n              prevState,\n            });\n          }\n          return this.state;\n        }\n      }\n\n      return StoreEngine;\n    },\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/StoreEngine.js","import lGet from 'lodash.get';\nimport { combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport default (bottle) => {\n  bottle.factory(\n    'StoreEngineReducer',\n    ({\n      p,\n      Store,\n      BASE_STATE_UNINITIALIZED_VALUE,\n      BASE_STATE_STATUS_INITIALIZATION_ERROR,\n      BASE_STATE_STATUS_INITIALIZED,\n    }) => {\n      const defaultActionReducer = ({ engines }) => {\n        const localEngines = [...engines];\n        const first = localEngines.shift();\n\n        return localEngines.reduce((memo, engine) => {\n          const actions = { ...memo };\n          Object.keys(engine.mutators).forEach((name) => {\n            actions[name] = async (...params) => engine.perform({ name, actions, params });\n          });\n\n          return actions;\n        }, first.actions);\n      };\n\n      const defaultStateReducer = (memo, state) => {\n        if (memo === BASE_STATE_UNINITIALIZED_VALUE) {\n          return state;\n        } else if (state === BASE_STATE_UNINITIALIZED_VALUE) {\n          return memo;\n        }\n        if (typeof memo === 'object') {\n          if (typeof state === 'object') {\n            return { ...memo, ...state };\n          }\n          // eslint-disable-next-line no-console\n          console.log('non-object state:', state);\n          return state;\n        }\n        return state;\n      };\n\n      class StoreEngineReducer extends Store {\n        constructor(engines, props = {}) {\n          super({ initialState: BASE_STATE_UNINITIALIZED_VALUE });\n          this.engines = engines;\n          this._stateReducer = lGet(props, 'stateReducer', defaultStateReducer);\n          this._actionReducer = lGet(props, 'actionReducer', defaultActionReducer);\n\n          const engineStreams = engines.map(e => e._stateStream);\n          const self = this;\n          this._combinedStateStreams = combineLatest(...engineStreams)\n            .pipe(map(states => states.reduce(self._stateReducer, {})));\n          this._combinedStateStreams.subscribe((state) => {\n            this.state = state;\n          });\n          this.actions = this._actionReducer(this);\n        }\n\n        initialize() {\n          if (!this._initializePromise) {\n            this._initializePromise = new Promise(async (resolve, reject) => {\n              const [_, error] = await p(Promise.all(this.engines.map(engine => engine.initialize())));\n              if (error) {\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZATION_ERROR);\n                reject();\n              } else {\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZED);\n                resolve();\n              }\n            });\n          }\n\n          return this._initializePromise;\n        }\n      }\n\n      return StoreEngineReducer;\n    },\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/StoreEngineReducer.js","import store from './Store';\nimport storeEngine from './StoreEngine';\nimport storeReducer from './StoreEngineReducer';\n\nexport default (bottle) => {\n  store(bottle);\n  storeEngine(bottle);\n  storeReducer(bottle);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/index.js","\n\nexport default (bottle) => {\n  bottle.constant('BASE_STATE_UNINITIALIZED_VALUE', Symbol('BASE_STATE_UNINITIALIZED_VALUE'));\n  bottle.constant('BASE_STATE_STATUS_UNINITIALIZED', Symbol('BASE_STATE_STATUS_UNINITIALIZED'));\n  bottle.constant('BASE_STATE_STATUS_INITIALIZED', Symbol('BASE_STATE_STATUS_INITIALIZED'));\n  bottle.constant('BASE_STATE_STATUS_INITIALIZING', Symbol('BASE_STATE_STATUS_INITIALIZING'));\n  bottle.constant('BASE_STATE_STATUS_INITIALIZATION_ERROR', Symbol('BASE_STATE_STATUS_INITIALIZATION_ERROR'));\n  bottle.constant('ACTION_ERROR', Symbol('ACTION_ERROR'));\n  bottle.constant('ACTION_START', Symbol('ACTION_START'));\n  bottle.constant('ACTION_NOOP', Symbol('ACTION_NOOP'));\n  bottle.constant('ACTION_COMPLETE', Symbol('ACTION_COMPLETE'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","export default (bottle) => {\n  /**\n   * decomposes a promise into result and error;\n   * returns these in an array which also has properties of result and error,\n   * so\n   *\n   * const [result, error] = p(promiseFn())\n   *\n   * is valid as is\n   *\n   * const {result, error} = p(promiseFn());\n   *\n   * accepts a promise, or a function that is called with the remaining arguments.\n   */\n  bottle.factory('p', () => async (first, ...args) => {\n    let error = null;\n    let result;\n    try {\n      if (typeof first === 'function') {\n        result = await first(...args);\n      } else {\n        result = await (first);\n      }\n    } catch (err) {\n      error = err;\n    }\n    const out = [result, error];\n    out.result = result;\n    out.error = error;\n    return out;\n  });\n\n  bottle.factory('update', () => function (delta) {\n    return (actions, ...args) => (state) => {\n      const change = delta(actions, ...args)(state);\n      return Object.assign({}, state, change);\n    };\n  });\n\n  bottle.factory('mergeIntoState', () => change => state => Object.assign({}, state, change));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import bottle from './bottle';\n\nconst {\n  Store, StoreEngine, StoreEngineReducer, update, mergeIntoState,\n} = bottle().container;\nexport {\n  Store,\n  StoreEngine,\n  StoreEngineReducer,\n  update,\n  mergeIntoState,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Bottle from 'bottlejs';\nimport store from './Store';\nimport constants from './constants';\nimport util from './util';\n\nexport default () => {\n  const bottle = new Bottle();\n  store(bottle);\n  constants(bottle);\n  util(bottle);\n  return bottle;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/bottle.js","module.exports = require(\"bottlejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bottlejs\"\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}
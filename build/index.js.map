{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d70b675ccf533cfd9c1a","webpack:///external \"rxjs\"","webpack:///./src/Store/Store.js","webpack:///./src/Store/StoreEngine.js","webpack:///./src/Store/StoreEngineReducer.js","webpack:///./src/Store/index.js","webpack:///./src/constants.js","webpack:///./src/util.js","webpack:///./src/index.js","webpack:///./src/bottle.js","webpack:///external \"bottlejs\""],"names":["bottle","p","constructor","props","initializer","lGet","state","status","subscribe","initialize","resolve","error","reject","combineLatest","map","lActions","actions","Object","subscribeToActions","type","prevState","message","BASE_STATE_STATUS_INITIALIZED","defaultActionReducer","engine","defaultStateReducer","console","engineStreams","engines","e","self","states","actionName","action","Promise","_","store","storeEngine","storeReducer","Symbol","out","first","result","err","stream","pairwise","filter","context","Bottle","constants","util","container","Store","StoreEngine","StoreEngineReducer","update"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"freactal3\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"freactal3\"] = factory();\n\telse\n\t\troot[\"freactal3\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d70b675ccf533cfd9c1a","module.exports = require(\"rxjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs\"\n// module id = 0\n// module chunks = 0","import {combineLatest, BehaviorSubject} from 'rxjs';\nimport {map, pairwise, filter} from 'rxjs/operators';\nimport lGet from 'lodash.get';\n\nexport default (bottle) => {\n  bottle.factory(\n    'Store',\n    ({\n       BASE_STATE_UNINITIALIZED_VALUE,\n       BASE_STATE_STATUS_UNINITIALIZED,\n       BASE_STATE_STATUS_INITIALIZING,\n       BASE_STATE_STATUS_INITIALIZATION_ERROR,\n       BASE_STATE_STATUS_INITIALIZED,\n       p,\n     }) => {\n\n      class Store {\n        constructor(props = null) {\n\n          let state = BASE_STATE_UNINITIALIZED_VALUE;\n          let initializer = null;\n          if (props) {\n            if (typeof props === 'function') {\n              initializer = props;\n            } else if (typeof props === 'object') {\n              if ('state' in props || 'initializer' in props) {\n                initializer = lGet(props, 'initializer');\n                state = lGet(props, 'state', BASE_STATE_UNINITIALIZED_VALUE);\n              } else {\n                state = props;\n              }\n            } else {\n              state = props;\n            }\n          }\n\n          this._stateStream = new BehaviorSubject();\n          this._stateStream.subscribe((next) => {\n            this._state = next;\n          });\n\n          this._statusStream = new BehaviorSubject();\n          this._statusStream.subscribe((next) => {\n            this._status = next;\n          });\n\n          this._stream = combineLatest(this._stateStream, this._statusStream)\n            .pipe(\n              map(([state, status]) => {\n                return {\n                  state,\n                  status\n                };\n              }));\n\n          this._statusStream.next(BASE_STATE_STATUS_UNINITIALIZED);\n          this.state = state;\n\n          if (initializer) {\n            if (typeof initializer !== 'function') {\n              throw new Error('bad initializer', initializer);\n            }\n            this._initializer = initializer;\n          }\n        }\n\n        get state() {\n          return this._state;\n        }\n\n        set state(value) {\n          this._stateStream.next(value);\n        }\n\n        get status() {\n          return this._status;\n        }\n\n        subscribe(...args) {\n          this._stream.subscribe(...args);\n        }\n\n        initialize() {\n          if (!this._initPromise) {\n            this._initPromise = new Promise(async (resolve, reject) => {\n              if (!this._initializer) {\n                if (this.state !== BASE_STATE_STATUS_INITIALIZED) {\n                  this._statusStream.next(BASE_STATE_STATUS_INITIALIZED);\n                }\n                resolve();\n                return;\n              } else if (this.state === BASE_STATE_STATUS_INITIALIZED) {\n                resolve();\n                return;\n              }\n              this._statusStream.next(BASE_STATE_STATUS_INITIALIZING);\n              const [state, error] = await p(this._initializer, this);\n              if (error) {\n                this.initializionError = error;\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZATION_ERROR);\n                reject(error);\n              } else {\n                this.state = state;\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZED);\n                resolve();\n              }\n            });\n          }\n          return this._initPromise;\n        }\n      }\n\n      return Store;\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/Store.js","import {combineLatest, Subject} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport lGet from 'lodash.get';\n\nexport default (bottle) => {\n  bottle.factory(\n    'StoreEngine',\n    ({Store, ACTION_START, ACTION_ERROR, ACTION_COMPLETE, ACTION_NOOP, p}) => {\n\n      class StoreEngine extends Store {\n        constructor(props, actions) {\n          super(props);\n\n          this._actionsStream = new Subject();\n\n          this._actionStream = combineLatest(this._stream, this._actionsStream)\n            .pipe(\n              map(([store, action]) => {\n                return {\n                  ...store,\n                  ...action\n                };\n              }));\n\n          this._actions = {};\n          let lActions = actions || lGet(props, 'actions', {});\n          Object.keys(lActions).forEach((actionName) => {\n            this._actions[actionName] = async (...params) => this.do(actionName, lActions[actionName], ...params);\n          });\n        }\n\n        get actions() {\n          return this._actions;\n        }\n\n        subscribeToActions(...args) {\n          return this._actionStream.subscribe(...args);\n        }\n\n        async do(name, fn, ...params) {\n          await this.initialize();\n          if (!this.actions[name]) {\n            return this._actionsStream.next({\n              type: ACTION_ERROR,\n              name,\n              error: {message: 'cannot find action'}\n            });\n          }\n\n          this._actionsStream.next({\n            name,\n            params,\n            type: ACTION_START\n          });\n\n          const [state, error] = await p(fn, this, ...params);\n\n          if (error) {\n            this._actionsStream.next({\n              name,\n              params,\n              type: ACTION_ERROR,\n              error\n            });\n          } else {\n            let prevState = this.state;\n            this.state = state;\n            this._actionsStream.next({\n              type: ACTION_COMPLETE,\n              name,\n              params,\n              state,\n              prevState\n            });\n            return state;\n          }\n        }\n      }\n\n      return StoreEngine;\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/StoreEngine.js","import lGet from 'lodash.get';\nimport {combineLatest} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nexport default (bottle) => {\n  bottle.factory(\n    'StoreEngineReducer',\n    ({\n       p, StoreEngine, Store,\n       BASE_STATE_UNINITIALIZED_VALUE,\n       BASE_STATE_STATUS_UNINITIALIZED,\n       BASE_STATE_STATUS_INITIALIZING,\n       BASE_STATE_STATUS_INITIALIZATION_ERROR,\n       BASE_STATE_STATUS_INITIALIZED,\n     }) => {\n\n      const defaultActionReducer = (memo, engine) => {\n        return {...memo, ...engine.actions};\n      };\n\n      const defaultStateReducer = (memo, state) => {\n        if (memo === BASE_STATE_UNINITIALIZED_VALUE) {\n          return state;\n        } else if (state === BASE_STATE_UNINITIALIZED_VALUE) {\n          return memo;\n        }\n        if (typeof memo === 'object') {\n          if (typeof state === 'object') {\n            return {...memo, ...state};\n          } else {\n            console.log('non-object state:', state);\n            return state;\n          }\n        } else {\n          return state;\n        }\n      };\n\n      class StoreEngineReducer extends Store {\n        constructor(engines, props = {}) {\n          super({initialState: BASE_STATE_UNINITIALIZED_VALUE});\n          this.engines = engines;\n          this._stateReducer = lGet(props, 'storeReducer', defaultStateReducer);\n          this._actionReducer = lGet(props, 'actionReducer', defaultActionReducer);\n\n          const engineStreams = engines.map(e => e._stateStream);\n          const self = this;\n          this._combinedStateStreams = combineLatest(...engineStreams)\n            .pipe(\n              map((states) => {\n                return states.reduce(self._stateReducer, {});\n              }));\n          this._combinedStateStreams.subscribe((state) => this.state = state);\n          this.actions = engines.reduce(this._actionReducer, {});\n          Object.keys(this.actions).forEach(actionName => {\n            let action = this.actions[actionName];\n            this.actions[actionName] = async (...args) => {\n              await this.initialize();\n              return action(...args);\n            }\n          })\n        }\n\n        initialize() {\n          if (!this._initializePromise) {\n            this._initializePromise = new Promise(async (resolve, reject) => {\n              const [_, error] = await p(\n                Promise.all(this.engines.map((engine) => engine.initialize())));\n              if (error) {\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZATION_ERROR);\n                reject();\n              } else {\n                this._statusStream.next(BASE_STATE_STATUS_INITIALIZED);\n                resolve();\n              }\n            });\n          }\n\n          return this._initializePromise;\n        }\n      }\n\n      return StoreEngineReducer;\n    });\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/StoreEngineReducer.js","import store from './Store';\nimport storeEngine from './StoreEngine';\nimport storeReducer from './StoreEngineReducer';\n\nexport default (bottle) => {\n  store(bottle);\n  storeEngine(bottle);\n  storeReducer(bottle);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Store/index.js","\n\nexport default (bottle) => {\n  bottle.constant('BASE_STATE_UNINITIALIZED_VALUE', Symbol('BASE_STATE_UNINITIALIZED_VALUE'));\n  bottle.constant('BASE_STATE_STATUS_UNINITIALIZED', Symbol('BASE_STATE_STATUS_UNINITIALIZED'));\n  bottle.constant('BASE_STATE_STATUS_INITIALIZED', Symbol('BASE_STATE_STATUS_INITIALIZED'));\n  bottle.constant('BASE_STATE_STATUS_INITIALIZING', Symbol('BASE_STATE_STATUS_INITIALIZING'));\n  bottle.constant('BASE_STATE_STATUS_INITIALIZATION_ERROR', Symbol('BASE_STATE_STATUS_INITIALIZATION_ERROR'));\n  bottle.constant('ACTION_ERROR', Symbol('ACTION_ERROR'));\n  bottle.constant('ACTION_START', Symbol('ACTION_START'));\n  bottle.constant('ACTION_NOOP', Symbol('ACTION_NOOP'));\n  bottle.constant('ACTION_COMPLETE', Symbol('ACTION_COMPLETE'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import {BehaviorSubject} from 'rxjs';\nimport {filter, map, pairwise} from 'rxjs/operators';\nimport Preact from 'preact';\n\nexport default (bottle) => {\n  /**\n   * decomposes a promise into result and error;\n   * returns these in an array which also has properties of result and error,\n   * so\n   *\n   * const [result, error] = p(promiseFn())\n   *\n   * is valid as is\n   *\n   * const {result, error} = p(promiseFn());\n   *\n   * accepts a promise, or a function that is called with the remaining arguments.\n   */\n  bottle.factory('p', () => async (first, ...args) => {\n    let error = null;\n    let result;\n    try {\n      if (typeof first === 'function') {\n        result = await first(...args);\n      } else {\n        result = await (first);\n      }\n    } catch (err) {\n      error = err;\n    }\n    const out = [result, error];\n    out.result = result;\n    out.error = error;\n    return out;\n  });\n\n  bottle.factory('diffStream', ({}) => {\n    return () => {\n      let stream = new BehaviorSubject()\n        .pipe(\n          pairwise(),\n          filter(([a, b]) => {\n            return a !== b;\n          }),\n          map(([a, b]) => b)\n        );\n      stream.next(null);\n      return stream;\n    };\n  });\n\n  bottle.factory('update', () => {\n    return function (delta) {\n      return (context) => Object.assign({}, context.state, delta(context));\n    };\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import bottle from './bottle';\n\nconst {Store, StoreEngine, StoreEngineReducer, update} = bottle().container;\nexport {\n  Store,\n  StoreEngine,\n  StoreEngineReducer,\n  update\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Bottle from 'bottlejs';\nimport store from './Store';\nimport constants from './constants';\nimport util from './util';\n\nexport default () => {\n  let bottle = new Bottle();\n  store(bottle);\n  constants(bottle);\n  util(bottle);\n  return bottle;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bottle.js","module.exports = require(\"bottlejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bottlejs\"\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}